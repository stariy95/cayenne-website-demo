<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="shortcut icon" href="/favicon.ico" />
        <link rel="apple-touch-icon-precomposed" href="/apple-touch-icon-144-precomposed.png" sizes="144x144" />
        <link rel="stylesheet" href="http://cayenne.apache.org/css/styles-b770de6275.css"/>
        <script src="http://cayenne.apache.org/js/bundle-736b99fdc1.js"></script>
        <title>Running Unit Tests &middot; Apache Cayenne</title>
    </head>
    <body>
<header class="page-header">
    <div class="container">
        <div class="row">
            <div class="col">
                <nav class="navbar navbar-dark navbar-expand-lg">
                    <a class="navbar-brand nav-link active" href="http://cayenne.apache.org/">Apache Cayenne</a>

                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>

                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav mr-auto">
                            
                            <li class="nav-item">
                                <a class="nav-link" href="/download/">DOWNLOAD</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="/docs/">DOCUMENTATION</a>
                            </li>
                            
                            <li class="nav-item">
                                <a class="nav-link" href="/about/support/">SUPPORT</a>
                            </li>
                            
                        </ul>
                    </div>
                </nav>
            </div>
        </div>
    </div>
</header>




    <div class="container">
        <div class="row">
            <div class="col">
                <article>
                    <header>
                        <h1>Running Unit Tests</h1>
                    </header>
                    <section>
                        

<p>Cayenne provides a comprehensive suite of unit tests. To execute unit tests
you must first get Cayenne from Git, install JDK 1.7 and obtain the latest
Maven.</p>

<h2 id="prerequisites">Prerequisites</h2>

<p>Maven <a href="/dev/building-cayenne.html">build prerequisites and recommended settings</a> apply here.</p>

<h2 id="running-against-embedded-hsqldb">Running Against Embedded HSQLDB</h2>

<p>No extra setup is required. Just run Maven:</p>

<pre><code>$ cd cayenne
$ mvn install
</code></pre>

<p>or</p>

<pre><code>$ cd cayenne
$ mvn clean verify
</code></pre>

<h2 id="running-against-in-memory-database">Running Against In-memory Database</h2>

<p>Besides HSQLDB mentioned above Cayenne has preconfigured connection information for
following databases that support in-memory mode:</p>

<ul>
<li>derby</li>
<li>h2</li>
<li>sqlite</li>
</ul>

<p>For this databases you can run tests without any additional configuration by only specifying
<em>cayenneTestConnection</em> property that will activate required Maven profile:</p>

<pre><code>$ mvn verify -DcayenneTestConnection=derby    
</code></pre>

<h2 id="running-against-database-in-docker-only-on-linux">Running Against Database in Docker (only on Linux)</h2>

<p>Another handy option to run Cayenne tests is with preconfigured docker profiles.
The only thing you need is to install Docker.</p>

<p>You can run tests with following <em>cayenneTestConnection</em> properties:</p>

<pre><code>$ mvn verify -DcayenneTestConnection=mysql-docker
</code></pre>

<p>or</p>

<pre><code>$ mvn verify -DcayenneTestConnection=postgres-docker    
</code></pre>

<h2 id="running-against-a-specific-database">Running Against a Specific Database</h2>

<p>Final option to run tests against any supported database is with manual configuration.</p>

<h3 id="step-1-install-jdbc-driver-jars-in-a-local-maven-repo">Step 1. Install JDBC Driver Jars in a Local Maven Repo</h3>

<p>Most commercial drivers are not present in the public Maven repositories.
So they have to be installed by the tester locally. The group and artifact
ids are arbitrarily assigned in the main Cayenne POM, so users must follow
the POM or the examples below.</p>

<p><strong>FrontBase:</strong></p>

<pre><code>$ mvn install:install-file -Dfile=frontbasejdbc.jar -DgroupId=com.frontbase \
       -DartifactId=frontbase-driver -Dversion=4.1 -Dpackaging=jar -DgeneratePom=true
</code></pre>

<p><strong>OpenBase:</strong></p>

<pre><code>$ mvn install:install-file -Dfile=OpenBaseJDBC.jar -DgroupId=com.openbase \
       -DartifactId=openbase-driver -Dversion=9 -Dpackaging=jar -DgeneratePom=true
</code></pre>

<p><strong>Oracle:</strong></p>

<pre><code>$ mvn install:install-file -Dfile=ojdbc5.jar -DgroupId=com.oracle \
       -DartifactId=oracle-driver -Dversion=11 -Dpackaging=jar -DgeneratePom=true
</code></pre>

<p><strong>SQLServer:</strong></p>

<pre><code>$ mvn install:install-file -Dfile=sqljdbc4.jar -DgroupId=com.microsoft \
       -DartifactId=sqlserver-driver -Dversion=4.0 -Dpackaging=jar -DgeneratePom=true
</code></pre>

<p><strong>Sybase:</strong></p>

<pre><code>$ mvn install:install-file -Dfile=jconn3.jar -DgroupId=com.sybase \
       -DartifactId=sybase-driver -Dversion=12 -Dpackaging=jar -DgeneratePom=true
</code></pre>

<h3 id="step-2-run-tests-against-configured-data-source">Step 2. Run Tests Against Configured Data Source</h3>

<p>Database type and connection information can be specified either on the
command line or via a configuration file. First let&rsquo;s look at the command
line options:</p>

<pre><code>$ mvn verify -DcayenneTestConnection=&lt;profile_name&gt; \
   -DcayenneAdapter=org.apache.cayenne.dba.mysql.MySQLAdapter \
   -DcayenneJdbcUsername=myuser \
   -DcayenneJdbcPassword=mypassword \
   -DcayenneJdbcUrl=jdbc:mysql://localhost/cayenne \
   -DcayenneJdbcDriver=com.mysql.jdbc.Driver
</code></pre>

<p><em>cayenneTestConnection</em> is a property activating a DB-specific Maven
profile. <em><profile_name></em> can be one of:</p>

<ul>
<li>db2</li>
<li>derby</li>
<li>firebird</li>
<li>frontbase</li>
<li>h2</li>
<li>ingres</li>
<li>mysql</li>
<li>openbase</li>
<li>oracle</li>
<li>postgres</li>
<li>sqlite</li>
<li>sqlserver</li>
<li>sybase</li>
</ul>

<p>Another way to store this information permanently for each profile is to
create a directory <em>$HOME/.cayenne/</em> and place a file called
<em>connection.properties</em> in this directory. File contents should be
similar to this example:</p>

<pre><code>mysql.cayenne.adapter = org.apache.cayenne.dba.mysql.MySQLAdapter
mysql.jdbc.username = someuser
mysql.jdbc.password = somepasswd
mysql.jdbc.url = jdbc:mysql://mysql.host:3306/test_db?useUnicode=true&amp;characterEncoding=UTF-8&amp;generateSimpleParameterMetadata=true
mysql.jdbc.driver = com.mysql.jdbc.Driver

oracle.cayenne.adapter = org.apache.cayenne.dba.oracle.OracleAdapter
oracle.jdbc.username = someuser
oracle.jdbc.password = somepasswd
oracle.jdbc.url = jdbc:oracle:thin:@//oracle.host:1521/XE
oracle.jdbc.driver = oracle.jdbc.driver.OracleDriver

postgres.adapter = org.apache.cayenne.dba.postgres.PostgresAdapter
postgres.jdbc.username = someuser
postgres.jdbc.password = somepasswd
postgres.jdbc.url = jdbc:postgresql://postgresql.host:5432/test_db
postgres.jdbc.driver = org.postgresql.Driver

db2.adapter = org.apache.cayenne.dba.db2.DB2Adapter
db2.jdbc.username = someuser
db2.jdbc.password = somepasswd
db2.jdbc.url = jdbc:db2://db2.host:50000/test_db
db2.jdbc.driver = com.ibm.db2.jcc.DB2Driver
</code></pre>

<p>Each property starts with the Maven profile name (&ldquo;mysql&rdquo; and &ldquo;oracle&rdquo; in
the example above). Note that in this case you should still use
<em>cayenneTestConnection</em>. E.g.:</p>

<pre><code>$ mvn verify -DcayenneTestConnection=mysql
</code></pre>

                    </section>
                </article>
            </div>
        </div>
        <div class="row">
            <div class="col text-left">
                
                Previous: <a href='/dev/release-guide.html'>Release Guide</a>
                
            </div>
            <div class="col text-right">
                
                Next: <a href='/dev/cms-guide.html'>Guide to Cayenne CMS</a>
                
            </div>
        </div>
    </div>

<footer class="page-footer">
    <div class="container">
        <div class="row">
            
            <div class="col">
                <h3 class="footer">About</h3>
                <ul class="list-unstyled">
                    
                    <li><a href="/why-cayenne.html" class="footer">Why Cayenne?</a>
                    
                    <li><a href="/download/" class="footer">Download</a>
                    
                    <li><a href="/success-stories.html" class="footer">Success Stories</a>
                    
                    <li><a href="/about/support/" class="footer">Support</a>
                    
                </ul>
            </div>
            
            <div class="col">
                <h3 class="footer">Documentation</h3>
                <ul class="list-unstyled">
                    
                    <li><a href="/docs/4.1/getting-started/" class="footer">Getting Started (4.1)</a>
                    
                    <li><a href="/docs/4.0/getting-started/" class="footer">Getting Started (4.0)</a>
                    
                    <li><a href="/docs/4.1/getting-started-db-first/" class="footer">Database First tutorial (4.1)</a>
                    
                </ul>
            </div>
            
            <div class="col">
                <h3 class="footer">Collaboration</h3>
                <ul class="list-unstyled">
                    
                    <li><a href="https://issues.apache.org/jira/browse/CAY" class="footer">Bug/Feature Tracker</a>
                    
                    <li><a href="/mailing-lists.html" class="footer">Mailing Lists</a>
                    
                    <li><a href="/dev/code-repository.html" class="footer">Code Repository</a>
                    
                    <li><a href="/dev/" class="footer">Developer Guide</a>
                    
                    <li><a href="/how-can-i-help.html" class="footer">How can I help?</a>
                    
                    <li><a href="/contributors.html" class="footer">Contributors</a>
                    
                </ul>
            </div>
            
            <div class="col">
                <h3 class="footer">News</h3>
                <ul class="list-unstyled">
                    
                    <li>
                        <div>
                            <small class="text-muted">Nov 20, 2017</small>
                        </div>
                        <a href="/2017/11/cayenne-312-released.html" class="footer">Cayenne 3.1.2 Released</a>
                    </li>
                    
                    <li>
                        <div>
                            <small class="text-muted">Oct 14, 2017</small>
                        </div>
                        <a href="/2017/10/cayenne-41m1-released.html" class="footer">Cayenne 4.1 Milestone 1 Released</a>
                    </li>
                    
                    <li>
                        <div>
                            <small class="text-muted">Oct 06, 2017</small>
                        </div>
                        <a href="/2017/10/cayenne-40B2-released.html" class="footer">Cayenne 4.0 Beta 2 Released</a>
                    </li>
                    
                    <li>
                        <div>
                            <small class="text-muted">Jun 12, 2017</small>
                        </div>
                        <a href="/2017/06/cayenne-40B1-released.html" class="footer">Cayenne 4.0 Beta 1 Released</a>
                    </li>
                    
                    <li>
                        <div>
                            <small class="text-muted">Mar 07, 2017</small>
                        </div>
                        <a href="/2017/03/cayenne-40M5-released.html" class="footer">Cayenne 4.0 Milestone 5 Released</a>
                    </li>
                    
                    <li><a href="http://cayenne.apache.org/news" class="footer">More news</a>
                </ul>
            </div>
        </div>
    </div>
    <hr class="footer">
    <div class="container">
        <div class="row">
            <div class="col"></div>
            <div class="col-8">
                <p class="text-center page-footer-copyright">
                    Copyright Â© 2001-2017 Apache Software Foundation. Apache Cayenne, Cayenne, Apache,
                    the Apache feather logo, and the Apache Cayenne project logo are trademarks of The Apache Software Foundation.
                    <a href="http://cayenne.apache.org/privacy-policy.html">Privacy policy</a>
                </p>
            </div>
            <div class="col"></div>
        </div>
    </div>
</footer>

    
    </body>
</html>
